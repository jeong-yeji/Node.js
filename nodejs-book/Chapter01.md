# Chapter 01

> **Node.js는 Chrome V8 Javascript 엔진으로 빌드된 Javascript 런타임**

## 1.1 핵심 개념 이해하기

### 서버(Server)

**네트워크를 통해 클라이언트에 정보나 서비스를 제공하는 컴퓨터 또는 프로그램**

서버는 클라이언트의 요청에 대해 응답을 함.

### 자바스크립트 런타임(Javascrip Runtime)

런타임 : 특정 언어로 만든 프로그램들을 실행할 수 있는 환경

⇒ 노드는 자바스크립트 프로그램을 컴퓨터에서 실행할 수 있음

### 이벤트 기반(event-driven)

**이벤트(ex. 클릭, 네트워크 요청 등)가 발생할 때 미리 지정해둔 작업을 수행하는 방식**

이벤트 기반 시스템에서는 특정 이벤트가 발생할 때 무엇을 할지 미리 등록해둬야됨 ⇒ **이벤트 리스너(event listener)에 콜백(callback) 함수 등록**

여러 이벤트가 동시에 발생했을 때 어떤 순서로 콜백 함수를 호출할지 판단 ⇒ 이벤트 루프

**이벤트 루프(event loop)** : 이벤트 발생 시 호출할 콜백 함수를 관리하고, 호출된 콜백 함수의 실행 순서를 결정하는 역할. 노드 종료시까지 이벤트 처리를 위한 작업 반복

**백그라운드(background)** : setTimeout 같은 타이머나 이벤트 리스너가 대기. 여러 작업이 동시에 실행될 수 있음

**태스크 큐/콜백 큐(task queue/callback queue)** : 이벤트 발생 후, 백그라운드에서는 테스크 큐로 타이머나 이벤트 리스너의 콜백 함수를 보냄.  콜백은 보통 완료된 순서대로 줄을 서있으나 특정 경우에는 순서가 바뀌기도 함

### 논 블로킹 I/O

자바스크립트 코드는 동시에 실행될 수 있으나, I/O 작업(파일 시스템 접근, 네트워크를 통한 요청)은 동시에 실행될 수 없음

**논 블로킹(Non-blocking)** : 이전 작업이 완료될 때까지 대기하지 않고 다음 작업 수행

**블로킹(Blocking)** : 이전 작업이 끝나야만 다음 작업 수행

작업 순서에 따라 성능이 달라짐! 동시에 처리될 수 있는 I/O 작업이라도 논 블로킹 방식으로 코딩하지 않으면 의미 퇴새

`setTimeout(callback, 0)` : 코드를 논 블로킹으로 만들기 위해 사용하는 기법 중 하나. 밀리초가 0이므로 바로 실행되는 것 같지만 기본적인 지연시간이 있음.

논 블로킹 ≠ 동시 // 블로킹 := 동기 // 논 블로킹 := 비동기

### 싱글 스레드

**프로세스** : 운영체제에서 할당하는 작업의 단위로 프로세스 간에 메모리 등의 자원을 공유하지 않음.

**스레드** : 프로세스 내에서 실행되는 흐름의 단위로 스레드들은 부모 프로세스의 자원을 공유함.

노드는 프로세스에서 여러 개의 스레드를 생성하지만, **직접 제어할 수 있는 스레드는 하나**뿐이라 싱글 스레드로 여겨짐!

---

## 1.2 서버로서의 노드

노드는 libuv 라이브러리를 사용해 I/O 작업을 논 블로킹 방식으로 처리 ⇒ 스레드 하나가 많은 수의 I/O 작업을 감당할 수 있으나, **CPU 부하가 큰 작업에는 적합하지 않음**

⇒ 노드 사용에 적합한 곳 : **개수는 많지만 크기는 작은 데이터를 실시간으로 주고받는 서버**(네트워크, DB, 디스크 작업 같은 I/O 작업에 특화됨)
ex) 실시간 채팅 애플리케이션, 주식 차트, JSON 데이터를 제공하는 API 서버

- 노드의 장점
    
    멀티 스레드 방식에 비해 적은 컴퓨터 자원 사용
    
    I/O 작업이 많은 서버로 적합
    
    멀티 스레드 방식보다 쉬움
    
    웹 서버 내장
    
    자바 스크립트 사용
    
    JSON 형식과 쉽게 호환
    
- 노드의 단점
    
    기본적으로 싱글 스레드라서 CPU 코어를 하나만 사용
    
    CPU 작업이 많은 서버로는 부적합
    
    하나뿐인 스레드가 멈추지 않도록 관리 필요
    
    서버 규모가 커졌을 때 서버를 관리하기 어려움
    
    어중간한 성능